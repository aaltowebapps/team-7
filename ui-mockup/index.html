<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />

        <title>Find-a-Room</title>

        <link rel="stylesheet" href="jquery/jquery.mobile-1.0.1.min.css" />
        <link rel="stylesheet" href="style.css" />
        
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCBE8w-6Jn_-Qh-q27TLUt-vZ3AxIoH2w0&amp;sensor=true"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
        <script src="jquery/jquery.mobile-1.0.1.min.js"></script>
        
        <script type="text/javascript">
            var map;

            function initialize() {

                /* Options of the map */
                var options = {
                    zoom: 15,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    disableDefaultUI: true,
                }

                map = new google.maps.Map(document.getElementById('map_canvas'), options);

                if(navigator.geolocation) {
                     navigator.geolocation.getCurrentPosition(function(position) {
                        var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

                        map.setCenter(pos);
                        

                        /*Just for testing...*/
                        google.maps.event.addListener(map , "click", function(event) {
                            $("#test").html(event.latLng.lat() + ", " + event.latLng.lng());
                        }); 

                          initializePlaces();
                    }, function() {
                        $("#map_canvas").html("Geolocation failed.");
                    });
                } else {
                    /* Browser doesn't support geolocation */
                    $("#map_canvas").html("Your browser does not support geolocation.");
                }
            }

            function place(lat, lon, text) {
                this.options = {
                    map: map,
                    position: new google.maps.LatLng(lat, lon),
                    title: text,
                };

                map.setCenter(this.options.position);
                this.marker = new google.maps.Marker(this.options);

                google.maps.event.addListener(this.marker, 'click', function() {
                    $.mobile.changePage( "#inside", { transition: "pop"} );
                });
            }

            function initializePlaces() {
                place("60.18689745913466", "24.821578044211037", "T-talo");
            }

            $(function() {
                initialize();
            });

            $("#outside").live("pageshow", function() {
                initialize();
            });
        </script>

    </head>

    <body>

        <div data-role="page" id="search">

            <div data-theme="a" data-role="header" data-position="fixed">
                <div data-role="navbar" data-iconpos="top">
                    <ul>
                        <li>
                            <a href="#search" data-theme="" data-icon="search">
                                Search
                            </a>
                        </li>
                        <li>
                            <a href="#outside" data-theme="" data-icon="arrow-u">
                                Outside
                            </a>
                        </li>
                        <li>
                            <a href="#inside" data-theme="" data-icon="arrow-d">
                                Inside
                            </a>
                        </li>
                    </ul>
                </div>

                <div id="searchview">
                    <form action="" method="post">

                        <label data-theme="c" for="search-basic" class="ui-hidden-accessible">Search:</label>
                        <input type="search" name="search" id="search-basic" value="" placeholder="Search a room" data-theme="c" />
                    </form>
                </div>

            </div>
           
            <div data-role="content">
              
                <p id="listview">
                <ul data-role="listview" data-divider-theme="d" data-inset="false">

                    <li data-role="list-divider">
                        Päärakennus
                    </li>

                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            A-sali
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>

                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            M-sali
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>

                    <li data-role="list-divider">
                        T-talo
                    </li>

                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            A000
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>
                    
                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            A000
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>
                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            A000
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>

                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            A000
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>

                    <li data-role="list-divider">
                        TUAS-talo
                    </li>
                    
                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            B111
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>

                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            B111
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>

                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            B111
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>

                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            B111
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>

                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            B111
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>

                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            B111
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>

                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            B111
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>

                    <li data-theme="c" class="list_item">
                        <a href="#inside" data-transition="slide" data-icon="arrow-d">
                            B111
                        </a>

                        <a href="#outside" data-transition="slide" data-icon="arrow-u"  title="Outside" data-theme="c" class="list_right">
                            Outside
                        </a>
                    </li>

                </ul>
            </p>
            </div>
        </div>

        <div data-role="page" id="inside">
            <div data-theme="a" data-role="header">
                <div data-role="navbar" data-iconpos="top">
                    <ul>
                        <li>
                            <a href="#search" data-theme="" data-icon="search">
                                Search
                            </a>
                        </li>
                        <li>
                            <a href="#outside" data-theme="" data-icon="arrow-u">
                                Outside
                            </a>
                        </li>
                        <li>
                            <a href="#inside" data-theme="" data-icon="arrow-d">
                                Inside
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <div data-role="content">
            </div>
            <div data-theme="a" data-role="footer">
                <div data-role="navbar" data-iconpos="top">
                    <ul>
                        <li>
                            <a href="#page4" data-theme="c" data-icon="">
                                1st
                            </a>
                        </li>
                        <li>
                            <a href="#page1" data-theme="c" data-icon="">
                                2nd
                            </a>
                        </li>
                        <li>
                            <a href="#page1" data-theme="c" data-icon="">
                                3rd
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div data-role="page" id="outside" class="full_height">
            <div data-theme="a" data-role="header">
                <div data-role="navbar" data-iconpos="top">
                    <ul>
                        <li>
                            <a href="#search" data-theme="" data-icon="search">
                                Search
                            </a>
                        </li>
                        <li>
                            <a href="#outside" data-theme="" data-icon="arrow-u">
                                Outside
                            </a>
                        </li>
                        <li>
                            <a href="#inside" data-theme="" data-icon="arrow-d">
                                Inside
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <div data-role="content" id="map_canvas"></div>
            <div id="test"></div>
        </div>
    </body>
</html>