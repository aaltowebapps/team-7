<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <meta rel="apple-touch-icon" href="apple-touch-icon.png">
        <meta rel="apple-touch-icon" sizes="72x72" href="apple-touch-icon-72x72.png">
        <meta rel="apple-touch-icon" sizes="114x114" href="apple-touch-icon-114x114.png">
        <meta rel="apple-touch-icon" sizes="144x144" href="apple-touch-icon-144x144.png">

        <title>Find-a-Room</title>

        <link rel="stylesheet" href="jquery/jquery.mobile-1.1.0-rc.2.min.css">
        <link rel="stylesheet" href="jquery/jquery.mobile.theme-1.1.0-rc.2.min.css">
        <link rel="stylesheet" href="jquery/jquery.mobile.structure-1.1.0-rc.2.min.css">
        <link rel="stylesheet" href="style.css">

        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCBE8w-6Jn_-Qh-q27TLUt-vZ3AxIoH2w0&amp;sensor=true"></script>
        <script src="jquery/jquery-1.7.1.min.js"></script>
        <script src="jquery/jquery.mobile-1.1.0-rc.2.min.js"></script>
        <script src="jquery/jquery.json-2.3.min.js"></script>
        <script src="jquery/jquery.overscroll.min.js"></script>
        <script src="markerwithlabel_packed.js"></script>
        <script src="base64.js"></script>
        
        <script src="base.js"></script> 
        <script src="search.js"></script> 
        <script src="outside.js"></script> 
        <script src="inside.js"></script> 
        <script>
          var base = new Base();
          var search = new Search();
          var outside = new Outside();
          var inside = new Inside();

          // global variables for communication
          // TODO: use something else?
          var selectedBuilding, selectedRoom;
        </script>

    </head>

    <body>

        <div data-role="page" id="search">
            <div data-theme="a" data-role="header" data-position="fixed" data-tap-toggle="false">
                <div data-role="navbar">
                    <ul>
                        <li>
                            <a href="#search" data-theme="" data-transition="slide" class="ui-state-persist">
                                <span class="icon-search ui-icon-nav"></span>
                                Search
                            </a>
                        </li>
                        <li>
                            <a href="#outside" data-theme="" data-transition="slide" class="disableable">
                                <span class="icon-map ui-icon-nav"></span>
                                Outside
                            </a>
                        </li>
                        <li>
                            <a href="#inside" data-theme="" data-transition="slide" class="disableable">
                                <span class="icon-building ui-icon-nav"></span>
                                Inside
                            </a>
                        </li>
                    </ul>
                </div>

                <div id="searchview">
                        <label data-theme="c" for="search-basic" class="ui-hidden-accessible">Search:</label>
                        <input type="search" name="search" id="search-basic" value="" placeholder="Room name or code" data-theme="c">
                </div>

            </div>
           
            <div data-role="content" id="listview">
                <div id="no-input-container">
                    <div id="arrow"></div>
                    <div id="no-input">Enter your room code</div>
                    <div id="no-input-buttons">
                        <a href="#about" data-role="button" data-rel="dialog" data-transition="pop" data-inline="true">About</a>
                        <a href="#help" data-role="button" data-rel="dialog" data-transition="pop" data-theme="e" data-inline="true">Need help?</a>
                    </div>
                </div>
                <ul class="searchview-list">
                </ul>
            </div>
        </div>
        
        <div data-role="page" id="outside">
            <div data-theme="a" data-role="header" data-position="fixed" data-tap-toggle="false">
                <div data-role="navbar">
                    <ul>
                        <li>
                            <a href="#search" data-theme="" data-transition="slide" data-direction="reverse">
                                <span class="icon-search ui-icon-nav"></span>
                                Search
                            </a>
                        </li>
                        <li>
                            <a href="#outside" data-theme="" data-transition="slide" class="ui-state-persist disableable">
                                <span class="icon-map ui-icon-nav"></span>
                                Outside
                            </a>
                        </li>
                        <li>
                            <a href="#inside" data-theme="" data-transition="slide" class="disableable">
                                <span class="icon-building ui-icon-nav"></span>
                                Inside
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <div data-role="content" id="map-canvas"></div>
        </div>

        <div data-role="page" id="inside">
            <div data-theme="a" data-role="header" data-position="fixed" data-tap-toggle="false">
                <div data-role="navbar">
                    <ul>
                        <li>
                            <a href="#search" data-theme="" data-transition="slide" data-direction="reverse">
                                <span class="icon-search ui-icon-nav"></span>
                                Search
                            </a>
                        </li>
                        <li>
                            <a href="#outside" data-theme="" data-transition="slide" data-direction="reverse" class="disableable">
                                <span class="icon-map ui-icon-nav"></span>
                                Outside
                            </a>
                        </li>
                        <li>
                            <a href="#inside" data-theme="" data-transition="slide" class="ui-state-persist disableable">
                                <span class="icon-building ui-icon-nav"></span>
                                Inside
                            </a>
                        </li>
                    </ul>
                </div>

                <div data-role="navbar">
                  <ul>
                    <li><a id="floorDown">Down</a></li>
                    <li><a id="curfloor" class="ui-disabled"></a></li>
                    <li><a id="floorUp">Up</a></li>
                  </ul>
                </div>
            </div>

            <div data-role="content" id="inside-content">
              <div id="floormap"></div>
              <div id="send-update-bar">
                <a href="#sending-dialog" data-role="button" id="send-update-button"></a>
              </div>
              <div id="zoom-controls">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="44px" height="88px">
                  <g id="svgplus"><rect style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:1.10933673000000010;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" width="44" height="44" x="0" y="0" ry="0" rx="0" /><path style="fill:none;stroke:#000000;stroke-width:6;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" d="m 4,22 36,0" /><path style="fill:none;stroke:#000000;stroke-width:6;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" d="m 22,4 0,36" /></g><g id="svgminus" transform="translate(0,44)"><rect style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:1.10933673000000010;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" width="44" height="44" x="0" y="0" ry="0" rx="0" /><path style="fill:none;stroke:#000000;stroke-width:6;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" d="m 4,22 36,0" /></g>
                </svg>
              </div>
            </div>

        </div>

        <div data-role="dialog" id="about">
          <div data-role="header">
            <h1>About</h1>
          </div>
          
          <div data-role="content">
            Coming soon...
            <a data-role="button" href="#search">Close</a>
          </div>
        </div>

        <div data-role="dialog" id="help">
          <div data-role="header">
            <h1>Need help?</h1>
          </div>
          
          <div data-role="content">
            <span class="help-line"><span class="big">1st</span>Enter your WebOodi code or room name.</span>
            <span class="help-line"><span class="big">2nd</span>Locate the right building.</span>
            <span class="help-line"><span class="big">3rd</span>Locate the right room in the building.</span>
            <a data-role="button" href="#search">Close</a>
          </div>
        </div>

        <div data-role="dialog" id="no-roomlocation-notification">
          <div data-role="header">
            <h1>No room location</h1>
          </div>
          
          <div data-role="content">
            Floor maps for this building are available, but the room location isn't known. If you know the room location, please press on the map on the correct floor to set the location.
            <a data-role="button" href="#inside">Okay!</a>
          </div>
        </div>

        <div data-role="dialog" id="sending-dialog">
          <div data-role="header">
            <h1>Uploading room data</h1>
          </div>
          
          <div data-role="content">
            <p class="upload-progress">
              <img src="jquery/images/ajax-loader2.gif">Please wait..
            </p>
            <p class="upload-done">
              Upload complete! Thank you!
              <a data-role="button" href="#inside">Okay!</a>
            </p>
          </div>
        </div>
    </body>
</html>
